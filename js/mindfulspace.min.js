import"./main.min.js";import{g as B,d as D,s as I,a as F,b as M,F as w}from"./common.min.js";function j(){const a=document.querySelectorAll("[data-fls-tabs]");let n=[];if(a.length>0){const s=B();s&&s.startsWith("tab-")&&(n=s.replace("tab-","").split("-")),a.forEach((t,o)=>{t.classList.add("--tab-init"),t.setAttribute("data-fls-tabs-index",o),t.addEventListener("click",h),r(t)});let i=D(a,"flsTabs");i&&i.length&&i.forEach(t=>{t.matchMedia.addEventListener("change",function(){e(t.itemsArray,t.matchMedia)}),e(t.itemsArray,t.matchMedia)})}function e(s,i){s.forEach(t=>{t=t.item;let o=t.querySelector("[data-fls-tabs-titles]"),u=t.querySelectorAll("[data-fls-tabs-title]"),f=t.querySelector("[data-fls-tabs-body]"),g=t.querySelectorAll("[data-fls-tabs-item]");u=Array.from(u).filter(m=>m.closest("[data-fls-tabs]")===t),g=Array.from(g).filter(m=>m.closest("[data-fls-tabs]")===t),g.forEach((m,v)=>{i.matches?(f.append(u[v]),f.append(m),t.classList.add("--tab-spoller")):(o.append(u[v]),t.classList.remove("--tab-spoller"))})})}function r(s){let i=s.querySelectorAll("[data-fls-tabs-titles]>*"),t=s.querySelectorAll("[data-fls-tabs-body]>*");const o=s.dataset.flsTabsIndex,u=n[0]==o;if(u){const f=s.querySelector("[data-fls-tabs-titles]>.--tab-active");f&&f.classList.remove("--tab-active")}t.length&&t.forEach((f,g)=>{i[g].setAttribute("data-fls-tabs-title",""),f.setAttribute("data-fls-tabs-item",""),u&&g==n[1]&&i[g].classList.add("--tab-active"),f.hidden=!i[g].classList.contains("--tab-active")})}function d(s){let i=s.querySelectorAll("[data-fls-tabs-title]"),t=s.querySelectorAll("[data-fls-tabs-item]");const o=s.dataset.flsTabsIndex;function u(g){if(g.hasAttribute("data-fls-tabs-animate"))return g.dataset.flsTabsAnimate>0?Number(g.dataset.flsTabsAnimate):500}const f=u(s);if(t.length>0){const g=s.hasAttribute("data-fls-tabs-hash");t=Array.from(t).filter(m=>m.closest("[data-fls-tabs]")===s),i=Array.from(i).filter(m=>m.closest("[data-fls-tabs]")===s),t.forEach((m,v)=>{i[v].classList.contains("--tab-active")?(f?I(m,f):m.hidden=!1,g&&!m.closest(".popup")&&F(`tab-${o}-${v}`)):f?M(m,f):m.hidden=!0})}}function h(s){const i=s.target;if(i.closest("[data-fls-tabs-title]")){const t=i.closest("[data-fls-tabs-title]"),o=t.closest("[data-fls-tabs]");if(!t.classList.contains("--tab-active")&&!o.querySelector(".--slide")){let u=o.querySelectorAll("[data-fls-tabs-title].--tab-active");u.length&&(u=Array.from(u).filter(f=>f.closest("[data-fls-tabs]")===o)),u.length&&u[0].classList.remove("--tab-active"),t.classList.add("--tab-active"),d(o)}s.preventDefault()}}}window.addEventListener("load",j),(function(){const a=document.querySelectorAll("[data-quotes]");a.length&&a.forEach(n=>{const e=Array.from(n.querySelectorAll("[data-quote-item]")),r=n.parentElement,d=r?r.querySelector("[data-quote-next]"):null;if(!e.length)return;if(e.length===1){e[0].classList.add("is-active"),d&&(d.style.display="none");return}let h=0;function s(i){e.forEach((t,o)=>{t.classList.toggle("is-active",o===i)})}s(h),d&&d.addEventListener("click",()=>{h=(h+1)%e.length,s(h)})})})();const q="fls-user-theme";function N(){return new Date().getHours()}function O(){const a=document.documentElement,n=document.querySelector("[data-fls-darklite]");if(!n)return;const e=Array.from(n.querySelectorAll(".theme-aside__item"));function r(){const i=localStorage.getItem(q);if(i)return i;const t=document.querySelector("[data-fls-darklite-time]");if(t){let o=t.dataset.flsDarkliteTime||"18,5";const[u,f]=o.split(","),g=+u,m=+f,v=N();return(g<=m?v>=g&&v<=m:v>=g||v<=m)?"dark":"light"}return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function d(i,{save:t=!1}={}){a.setAttribute("data-theme",i),e.forEach(o=>{const u=o.dataset.theme;o.classList.toggle("theme-aside__item--active",u===i)}),t&&localStorage.setItem(q,i)}const h=r();d(h),window.matchMedia&&!localStorage.getItem(q)&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{const o=t.matches?"dark":"light";d(o)}),n.addEventListener("click",i=>{const t=i.target.closest(".theme-aside__item");if(!t)return;const o=t.dataset.theme;o&&d(o,{save:!0})});const s=document.querySelector("[data-fls-darklite-reset]");s&&s.addEventListener("click",()=>{localStorage.removeItem(q);const i=r();d(i,{save:!1})}),w&&w.log&&w.log(`Darklite: \u0430\u043A\u0442\u0438\u0432\u043D\u0430 \u0442\u0435\u043C\u0430 "${h}"`)}window.addEventListener("load",O),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-fls-thoughtjournal]").forEach(H)});function H(a){const n=a.querySelector(".thoughtjournal__input"),e=a.querySelector(".thoughtjournal__thought-save"),r=a.querySelector(".thoughtjournal__thought-clear");if(!n||!e||!r)return;const h="fls_thought_journal_"+(a.dataset.journalKey||"default"),s=localStorage.getItem(h);s&&s.length>0?n.value=s:n.value="",i(),n.addEventListener("input",function(){i()}),e.addEventListener("click",function(){const t=n.value.trim();if(t){try{localStorage.setItem(h,t)}catch{}i()}}),r.addEventListener("click",function(){n.value="";try{localStorage.removeItem(h)}catch{}i()});function i(){const t=n.value.trim(),o=localStorage.getItem(h)||"",u=t.length>0,f=t!==o;e.disabled=!(u&&f),r.disabled=!(u||o.length>0)}}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-fls-moodtoday]").forEach(R)});function R(a){const n=a.querySelector(".moodtoday__scrollbars-track"),e=a.querySelector(".moodtoday__scrollbars-range"),r=a.querySelector(".moodtoday__scrollbars-thumb"),d=a.querySelector(".moodtoday__thumb-block"),h=a.querySelector(".moodtoday__smille"),s=a.querySelector(".moodtoday__text-center"),i=a.querySelector(".moodtoday__track-emotion");if(!n||!e||!r||!d||!h||!s||!i)return;let t=10,o=!1;const u=[{min:0,max:20,label:"Very Low",emoji:"\u{1F614}",color:"#6B52C9"},{min:20,max:40,label:"Low",emoji:"\u{1F641}",color:"#6B52C9"},{min:40,max:60,label:"Neutral",emoji:"\u{1F610}",color:"#F2B01E"},{min:60,max:80,label:"Good",emoji:"\u{1F642}",color:"#4CAF50"},{min:80,max:101,label:"Great",emoji:"\u{1F604}",color:"#4CAF50"}];function f(c){return Math.max(0,Math.min(1,c))}function g(c){const b=n.getBoundingClientRect();t=f((c-b.left)/b.width)*100,v()}function m(c){return u.find(b=>c>=b.min&&c<b.max)||u[u.length-1]}function v(){const c=t,b=m(c);e.style.width=c+"%",d.style.left=c+"%",r.setAttribute("aria-valuenow",String(Math.round(c))),s.textContent=b.label,s.style.color=b.color,h.textContent=b.emoji,h.style.filter=`drop-shadow(0 0 20px ${b.color}40)`,i.style.width=c+"%"}n.addEventListener("mousedown",function(c){c.preventDefault(),o=!0,g(c.clientX)}),r.addEventListener("mousedown",function(c){c.preventDefault(),o=!0}),document.addEventListener("mousemove",function(c){o&&g(c.clientX)}),document.addEventListener("mouseup",function(){o=!1}),n.addEventListener("touchstart",function(c){const b=c.touches[0];b&&(o=!0,g(b.clientX))},{passive:!0}),r.addEventListener("touchstart",function(c){o=!0},{passive:!0}),document.addEventListener("touchmove",function(c){if(!o)return;const b=c.touches[0];b&&g(b.clientX)},{passive:!0}),document.addEventListener("touchend",function(){o=!1}),r.addEventListener("keydown",function(c){(c.key==="ArrowLeft"||c.key==="ArrowDown")&&(t=Math.max(0,t-5),v()),(c.key==="ArrowRight"||c.key==="ArrowUp")&&(t=Math.min(100,t+5),v())}),v()}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-fls-feeltoday]").forEach($)});function $(a){const n=a.querySelectorAll(".feeltoday__item-button"),e=a.querySelector(".feeltoday__feeling"),r=a.querySelector(".feeltoday__feeling-item");if(!n.length||!e||!r)return;r.textContent="",e.classList.remove("feeltoday__feeling--visible"),n.forEach(h=>{h.addEventListener("click",function(){h.classList.toggle("feeltoday__item-button--active"),d()})});function d(){const h=a.querySelectorAll(".feeltoday__item-button--active .feeltoday__smille-text"),s=Array.from(h).map(i=>i.textContent.trim()).filter(Boolean);s.length>0?(r.textContent=s.join(", "),e.classList.add("feeltoday__feeling--visible")):(r.textContent="",e.classList.remove("feeltoday__feeling--visible"))}}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-fls-breathingpractice]").forEach(U)});function U(a){const n=a.querySelector(".breathingpractice__circle"),e=a.querySelector(".breathingpractice__circle-number"),r=a.querySelector(".breathingpractice__circle-text"),d=a.querySelector(".breathingpractice__button"),h=a.querySelector(".breathingpractice__button-reset");if(!n||!e||!r||!d||!h)return;let s=a.querySelector(".breathingpractice__button-label");if(!s){const y=d.querySelector("svg"),E=(d.textContent||"Start").trim();d.textContent="",y&&d.appendChild(y),s=document.createElement("span"),s.className="breathingpractice__button-label",s.textContent=E||"Start",d.appendChild(s)}const i=a.querySelectorAll(".breathingpractice_colomn-structure");if(i.length<2)return;const t=Array.from(i[0].querySelectorAll(".breathingpractice__settings-button")),o=Array.from(i[1].querySelectorAll(".breathingpractice__settings-button"));let u=!1,f="inhale",g=3,m=4,v=m,c=null;function b(y){return y==="inhale"?"#8B71EE":y==="hold"?"#F4A4BF":"#6B52C9"}function l(){const y=b(f);e.textContent=String(v),r.textContent=f,n.style.borderColor=y,n.style.boxShadow=`0 0 30px ${y}40`,n.style.background=`radial-gradient(circle, ${y}20, ${y}10)`,e.style.color=y;const E=u&&(f==="inhale"||f==="hold");n.style.width=E?"180px":"140px",n.style.height=E?"180px":"140px",u?(s.textContent="Pause",d.classList.add("breathingpractice__button--paused")):(s.textContent="Start",d.classList.remove("breathingpractice__button--paused")),t.forEach(L=>{const x=L.textContent.trim(),C=parseInt(x,10)===g;L.classList.toggle("breathingpractice__settings-button--active",C)}),o.forEach(L=>{const x=L.textContent.trim(),C=parseInt(x,10)===m;L.classList.toggle("breathingpractice__settings-button--active",C)})}function p(){c||(c=window.setInterval(function(){v<=1?(f==="inhale"?f="hold":f==="hold"?f="exhale":f="inhale",v=m):v-=1,l()},1e3))}function _(){c&&(clearInterval(c),c=null)}function A(){_(),u=!1,f="inhale",v=m,l()}d.addEventListener("click",function(){u=!u,u?p():_(),l()}),h.addEventListener("click",A),t.forEach(y=>{y.addEventListener("click",function(){const E=y.textContent.trim(),L=parseInt(E,10);isNaN(L)||(g=L,l())})}),o.forEach(y=>{y.addEventListener("click",function(){const E=y.textContent.trim(),L=parseInt(E,10);isNaN(L)||(m=L,u||(v=m),l())})});const S=t.find(y=>y.classList.contains("breathingpractice__settings-button--active"));if(S){const y=parseInt(S.textContent.trim(),10);isNaN(y)||(g=y)}const T=o.find(y=>y.classList.contains("breathingpractice__settings-button--active"));if(T){const y=parseInt(T.textContent.trim(),10);isNaN(y)||(m=y,v=y)}l()}(()=>{const a=document.querySelector(".aside__body"),n=document.querySelector(".aside__burger");if(!a||!n)return;function e(){const r=a.classList.toggle("aside__body--active");n.classList.toggle("aside__burger--close",r),typeof bodyLockToggle=="function"&&bodyLockToggle()}n.addEventListener("click",r=>{r.preventDefault(),e()}),document.addEventListener("click",r=>{if(!a.classList.contains("aside__body--active"))return;const d=r.target.closest(".aside__body"),h=r.target.closest(".aside__burger");!d&&!h&&e()})})(),(function(){const a=document.querySelectorAll(".sounds-aside__item"),n=document.querySelector("[data-sounds-controller]");if(!a.length||!n)return;let e=null;const r=n.querySelector("[data-sc-play]"),d=n.querySelector("[data-sc-seek]"),h=n.querySelector("[data-sc-title]"),s=n.querySelector("[data-sc-current]"),i=n.querySelector("[data-sc-duration]");function t(l){if(!l||!isFinite(l))return"0:00";l=Math.floor(l);const p=Math.floor(l/60),_=l%60;return p+":"+String(_).padStart(2,"0")}function o(l){l?(n.classList.add("sounds-controller--visible"),n.setAttribute("aria-hidden","false")):(n.classList.remove("sounds-controller--visible"),n.setAttribute("aria-hidden","true"))}function u(){r.classList.remove("is-playing"),d.value=0,s.textContent="0:00",i.textContent="0:00",h.textContent="Select a track"}function f(){if(!e)return;const l=e.duration||0,p=e.currentTime||0;if(s.textContent=t(p),l>0){const _=p/l*100;d.value=_}else d.value=0}function g(){e&&(i.textContent=t(e.duration||0))}function m(){e&&(r.classList.remove("is-playing"),d.value=0)}function v(l){l&&(l.removeEventListener("timeupdate",f),l.removeEventListener("loadedmetadata",g),l.removeEventListener("ended",m))}function c(l){l&&(l.addEventListener("timeupdate",f),l.addEventListener("loadedmetadata",g),l.addEventListener("ended",m))}function b(l,p){if(e&&e!==p&&(v(e),e.pause(),e.currentTime=0),a.forEach(A=>A.classList.remove("sounds-aside__item--active")),!p){e=null,u(),o(!1);return}e=p,l.classList.add("sounds-aside__item--active");const _=l.querySelector(".sounds-aside__title");h.textContent=_?_.textContent.trim():l.textContent.trim(),c(e),o(!0)}a.forEach(l=>{const p=l.querySelector(".sounds-aside__audio");p&&l.addEventListener("click",()=>{if(p.querySelector("source[src]")){if(e===p){p.paused?p.play().then(()=>r.classList.add("is-playing")).catch(()=>{}):(p.pause(),r.classList.remove("is-playing"));return}b(l,p),p.play().then(()=>{r.classList.add("is-playing")}).catch(()=>{r.classList.remove("is-playing")})}})}),r.addEventListener("click",()=>{e&&(e.paused?e.play().then(()=>{r.classList.add("is-playing")}).catch(()=>{}):(e.pause(),r.classList.remove("is-playing")))}),d.addEventListener("input",()=>{if(!e||!e.duration)return;const l=parseFloat(d.value)||0,p=e.duration*l/100;e.currentTime=p,s.textContent=t(p)}),d.addEventListener("change",()=>{}),document.addEventListener("click",l=>{if(!n.classList.contains("sounds-controller--visible"))return;const p=l.target,_=n.contains(p),A=Array.from(a).some(S=>S.contains(p));!_&&!A&&(e&&(v(e),e.pause(),e.currentTime=0),a.forEach(S=>S.classList.remove("sounds-aside__item--active")),e=null,u(),o(!1))}),o(!1)})();
