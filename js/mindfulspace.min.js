import"./main.min.js";import{g as D,d as B,s as j,a as F,b as N,F as A}from"./common.min.js";function I(){const a=document.querySelectorAll("[data-fls-tabs]");let o=[];if(a.length>0){const e=D();e&&e.startsWith("tab-")&&(o=e.replace("tab-","").split("-")),a.forEach((t,s)=>{t.classList.add("--tab-init"),t.setAttribute("data-fls-tabs-index",s),t.addEventListener("click",h),l(t)});let n=B(a,"flsTabs");n&&n.length&&n.forEach(t=>{t.matchMedia.addEventListener("change",function(){d(t.itemsArray,t.matchMedia)}),d(t.itemsArray,t.matchMedia)})}function d(e,n){e.forEach(t=>{t=t.item;let s=t.querySelector("[data-fls-tabs-titles]"),r=t.querySelectorAll("[data-fls-tabs-title]"),c=t.querySelector("[data-fls-tabs-body]"),g=t.querySelectorAll("[data-fls-tabs-item]");r=Array.from(r).filter(f=>f.closest("[data-fls-tabs]")===t),g=Array.from(g).filter(f=>f.closest("[data-fls-tabs]")===t),g.forEach((f,y)=>{n.matches?(c.append(r[y]),c.append(f),t.classList.add("--tab-spoller")):(s.append(r[y]),t.classList.remove("--tab-spoller"))})})}function l(e){let n=e.querySelectorAll("[data-fls-tabs-titles]>*"),t=e.querySelectorAll("[data-fls-tabs-body]>*");const s=e.dataset.flsTabsIndex,r=o[0]==s;if(r){const c=e.querySelector("[data-fls-tabs-titles]>.--tab-active");c&&c.classList.remove("--tab-active")}t.length&&t.forEach((c,g)=>{n[g].setAttribute("data-fls-tabs-title",""),c.setAttribute("data-fls-tabs-item",""),r&&g==o[1]&&n[g].classList.add("--tab-active"),c.hidden=!n[g].classList.contains("--tab-active")})}function u(e){let n=e.querySelectorAll("[data-fls-tabs-title]"),t=e.querySelectorAll("[data-fls-tabs-item]");const s=e.dataset.flsTabsIndex;function r(g){if(g.hasAttribute("data-fls-tabs-animate"))return g.dataset.flsTabsAnimate>0?Number(g.dataset.flsTabsAnimate):500}const c=r(e);if(t.length>0){const g=e.hasAttribute("data-fls-tabs-hash");t=Array.from(t).filter(f=>f.closest("[data-fls-tabs]")===e),n=Array.from(n).filter(f=>f.closest("[data-fls-tabs]")===e),t.forEach((f,y)=>{n[y].classList.contains("--tab-active")?(c?j(f,c):f.hidden=!1,g&&!f.closest(".popup")&&F(`tab-${s}-${y}`)):c?N(f,c):f.hidden=!0})}}function h(e){const n=e.target;if(n.closest("[data-fls-tabs-title]")){const t=n.closest("[data-fls-tabs-title]"),s=t.closest("[data-fls-tabs]");if(!t.classList.contains("--tab-active")&&!s.querySelector(".--slide")){let r=s.querySelectorAll("[data-fls-tabs-title].--tab-active");r.length&&(r=Array.from(r).filter(c=>c.closest("[data-fls-tabs]")===s)),r.length&&r[0].classList.remove("--tab-active"),t.classList.add("--tab-active"),u(s)}e.preventDefault()}}}window.addEventListener("load",I),(function(){const a=document.querySelectorAll("[data-quotes]");a.length&&a.forEach(o=>{const d=Array.from(o.querySelectorAll("[data-quote-item]")),l=o.parentElement,u=l?l.querySelector("[data-quote-next]"):null;if(!d.length)return;if(d.length===1){d[0].classList.add("is-active"),u&&(u.style.display="none");return}let h=0;function e(n){d.forEach((t,s)=>{t.classList.toggle("is-active",s===n)})}e(h),u&&u.addEventListener("click",()=>{h=(h+1)%d.length,e(h)})})})();const S="fls-user-theme";function M(){return new Date().getHours()}function H(){const a=document.documentElement,o=document.querySelector("[data-fls-darklite]");if(!o)return;const d=Array.from(o.querySelectorAll(".theme-aside__item"));function l(){const n=localStorage.getItem(S);if(n)return n;const t=document.querySelector("[data-fls-darklite-time]");if(t){let s=t.dataset.flsDarkliteTime||"18,5";const[r,c]=s.split(","),g=+r,f=+c,y=M();return(g<=f?y>=g&&y<=f:y>=g||y<=f)?"dark":"light"}return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function u(n,{save:t=!1}={}){a.setAttribute("data-theme",n),d.forEach(s=>{const r=s.dataset.theme;s.classList.toggle("theme-aside__item--active",r===n)}),t&&localStorage.setItem(S,n)}const h=l();u(h),window.matchMedia&&!localStorage.getItem(S)&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{const s=t.matches?"dark":"light";u(s)}),o.addEventListener("click",n=>{const t=n.target.closest(".theme-aside__item");if(!t)return;const s=t.dataset.theme;s&&u(s,{save:!0})});const e=document.querySelector("[data-fls-darklite-reset]");e&&e.addEventListener("click",()=>{localStorage.removeItem(S);const n=l();u(n,{save:!1})}),A&&A.log&&A.log(`Darklite: \u0430\u043A\u0442\u0438\u0432\u043D\u0430 \u0442\u0435\u043C\u0430 "${h}"`)}window.addEventListener("load",H),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-fls-thoughtjournal]").forEach(O)});function O(a){const o=a.querySelector(".thoughtjournal__input"),d=a.querySelector(".thoughtjournal__thought-save"),l=a.querySelector(".thoughtjournal__thought-clear");if(!o||!d||!l)return;const h="fls_thought_journal_"+(a.dataset.journalKey||"default"),e=localStorage.getItem(h);e&&e.length>0?o.value=e:o.value="",n(),o.addEventListener("input",function(){n()}),d.addEventListener("click",function(){const t=o.value.trim();if(t){try{localStorage.setItem(h,t)}catch{}n()}}),l.addEventListener("click",function(){o.value="";try{localStorage.removeItem(h)}catch{}n()});function n(){const t=o.value.trim(),s=localStorage.getItem(h)||"",r=t.length>0,c=t!==s;d.disabled=!(r&&c),l.disabled=!(r||s.length>0)}}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-fls-moodtoday]").forEach(R)});function R(a){const o=a.querySelector(".moodtoday__scrollbars-track"),d=a.querySelector(".moodtoday__scrollbars-range"),l=a.querySelector(".moodtoday__scrollbars-thumb"),u=a.querySelector(".moodtoday__thumb-block"),h=a.querySelector(".moodtoday__smille"),e=a.querySelector(".moodtoday__text-center"),n=a.querySelector(".moodtoday__track-emotion");if(!o||!d||!l||!u||!h||!e||!n)return;let t=10,s=!1;const r=[{min:0,max:20,label:"Very Low",emoji:"\u{1F614}",color:"#6B52C9"},{min:20,max:40,label:"Low",emoji:"\u{1F641}",color:"#6B52C9"},{min:40,max:60,label:"Neutral",emoji:"\u{1F610}",color:"#F2B01E"},{min:60,max:80,label:"Good",emoji:"\u{1F642}",color:"#4CAF50"},{min:80,max:101,label:"Great",emoji:"\u{1F604}",color:"#4CAF50"}];function c(i){return Math.max(0,Math.min(1,i))}function g(i){const b=o.getBoundingClientRect();t=c((i-b.left)/b.width)*100,y()}function f(i){return r.find(b=>i>=b.min&&i<b.max)||r[r.length-1]}function y(){const i=t,b=f(i);d.style.width=i+"%",u.style.left=i+"%",l.setAttribute("aria-valuenow",String(Math.round(i))),e.textContent=b.label,e.style.color=b.color,h.textContent=b.emoji,h.style.filter=`drop-shadow(0 0 20px ${b.color}40)`,n.style.width=i+"%"}o.addEventListener("mousedown",function(i){i.preventDefault(),s=!0,g(i.clientX)}),l.addEventListener("mousedown",function(i){i.preventDefault(),s=!0}),document.addEventListener("mousemove",function(i){s&&g(i.clientX)}),document.addEventListener("mouseup",function(){s=!1}),o.addEventListener("touchstart",function(i){const b=i.touches[0];b&&(s=!0,g(b.clientX))},{passive:!0}),l.addEventListener("touchstart",function(i){s=!0},{passive:!0}),document.addEventListener("touchmove",function(i){if(!s)return;const b=i.touches[0];b&&g(b.clientX)},{passive:!0}),document.addEventListener("touchend",function(){s=!1}),l.addEventListener("keydown",function(i){(i.key==="ArrowLeft"||i.key==="ArrowDown")&&(t=Math.max(0,t-5),y()),(i.key==="ArrowRight"||i.key==="ArrowUp")&&(t=Math.min(100,t+5),y())}),y()}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-fls-feeltoday]").forEach($)});function $(a){const o=a.querySelectorAll(".feeltoday__item-button"),d=a.querySelector(".feeltoday__feeling"),l=a.querySelector(".feeltoday__feeling-item");if(!o.length||!d||!l)return;l.textContent="",d.classList.remove("feeltoday__feeling--visible"),o.forEach(h=>{h.addEventListener("click",function(){h.classList.toggle("feeltoday__item-button--active"),u()})});function u(){const h=a.querySelectorAll(".feeltoday__item-button--active .feeltoday__smille-text"),e=Array.from(h).map(n=>n.textContent.trim()).filter(Boolean);e.length>0?(l.textContent=e.join(", "),d.classList.add("feeltoday__feeling--visible")):(l.textContent="",d.classList.remove("feeltoday__feeling--visible"))}}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-fls-breathingpractice]").forEach(X)});function X(a){const o=a.querySelector(".breathingpractice__circle"),d=a.querySelector(".breathingpractice__circle-number"),l=a.querySelector(".breathingpractice__circle-text"),u=a.querySelector(".breathingpractice__button"),h=a.querySelector(".breathingpractice__button-reset");if(!o||!d||!l||!u||!h)return;let e=a.querySelector(".breathingpractice__button-label");if(!e){const m=u.querySelector("svg"),p=(u.textContent||"Start").trim();u.textContent="",m&&u.appendChild(m),e=document.createElement("span"),e.className="breathingpractice__button-label",e.textContent=p||"Start",u.appendChild(e)}const n=a.querySelectorAll(".breathingpractice_colomn-structure");if(n.length<2)return;const t=Array.from(n[0].querySelectorAll(".breathingpractice__settings-button")),s=Array.from(n[1].querySelectorAll(".breathingpractice__settings-button"));let r=!1,c="inhale",g=3,f=4,y=f,i=null;function b(m){return m==="inhale"?"#8B71EE":m==="hold"?"#F4A4BF":"#6B52C9"}function _(){const m=b(c);d.textContent=String(y),l.textContent=c,o.style.borderColor=m,o.style.boxShadow=`0 0 30px ${m}40`,o.style.background=`radial-gradient(circle, ${m}20, ${m}10)`,d.style.color=m;const p=r&&(c==="inhale"||c==="hold");o.style.width=p?"180px":"140px",o.style.height=p?"180px":"140px",r?(e.textContent="Pause",u.classList.add("breathingpractice__button--paused")):(e.textContent="Start",u.classList.remove("breathingpractice__button--paused")),t.forEach(v=>{const L=v.textContent.trim(),E=parseInt(L,10)===g;v.classList.toggle("breathingpractice__settings-button--active",E)}),s.forEach(v=>{const L=v.textContent.trim(),E=parseInt(L,10)===f;v.classList.toggle("breathingpractice__settings-button--active",E)})}function T(){i||(i=window.setInterval(function(){y<=1?(c==="inhale"?c="hold":c==="hold"?c="exhale":c="inhale",y=f):y-=1,_()},1e3))}function q(){i&&(clearInterval(i),i=null)}function k(){q(),r=!1,c="inhale",y=f,_()}u.addEventListener("click",function(){r=!r,r?T():q(),_()}),h.addEventListener("click",k),t.forEach(m=>{m.addEventListener("click",function(){const p=m.textContent.trim(),v=parseInt(p,10);isNaN(v)||(g=v,_())})}),s.forEach(m=>{m.addEventListener("click",function(){const p=m.textContent.trim(),v=parseInt(p,10);isNaN(v)||(f=v,r||(y=f),_())})});const x=t.find(m=>m.classList.contains("breathingpractice__settings-button--active"));if(x){const m=parseInt(x.textContent.trim(),10);isNaN(m)||(g=m)}const w=s.find(m=>m.classList.contains("breathingpractice__settings-button--active"));if(w){const m=parseInt(w.textContent.trim(),10);isNaN(m)||(f=m,y=m)}_()}(()=>{const a=document.querySelector(".aside__body"),o=document.querySelector(".aside__burger");if(!a||!o)return;function d(){const l=a.classList.toggle("aside__body--active");o.classList.toggle("aside__burger--close",l),typeof bodyLockToggle=="function"&&bodyLockToggle()}o.addEventListener("click",l=>{l.preventDefault(),d()}),document.addEventListener("click",l=>{if(!a.classList.contains("aside__body--active"))return;const u=l.target.closest(".aside__body"),h=l.target.closest(".aside__burger");!u&&!h&&d()})})();
