import"./main.min.js";import{g as D,d as B,s as F,a as N,b as M,F as A}from"./common.min.js";function H(){const a=document.querySelectorAll("[data-fls-tabs]");let r=[];if(a.length>0){const e=D();e&&e.startsWith("tab-")&&(r=e.replace("tab-","").split("-")),a.forEach((t,s)=>{t.classList.add("--tab-init"),t.setAttribute("data-fls-tabs-index",s),t.addEventListener("click",g),d(t)});let n=B(a,"flsTabs");n&&n.length&&n.forEach(t=>{t.matchMedia.addEventListener("change",function(){h(t.itemsArray,t.matchMedia)}),h(t.itemsArray,t.matchMedia)})}function h(e,n){e.forEach(t=>{t=t.item;let s=t.querySelector("[data-fls-tabs-titles]"),o=t.querySelectorAll("[data-fls-tabs-title]"),l=t.querySelector("[data-fls-tabs-body]"),m=t.querySelectorAll("[data-fls-tabs-item]");o=Array.from(o).filter(c=>c.closest("[data-fls-tabs]")===t),m=Array.from(m).filter(c=>c.closest("[data-fls-tabs]")===t),m.forEach((c,b)=>{n.matches?(l.append(o[b]),l.append(c),t.classList.add("--tab-spoller")):(s.append(o[b]),t.classList.remove("--tab-spoller"))})})}function d(e){let n=e.querySelectorAll("[data-fls-tabs-titles]>*"),t=e.querySelectorAll("[data-fls-tabs-body]>*");const s=e.dataset.flsTabsIndex,o=r[0]==s;if(o){const l=e.querySelector("[data-fls-tabs-titles]>.--tab-active");l&&l.classList.remove("--tab-active")}t.length&&t.forEach((l,m)=>{n[m].setAttribute("data-fls-tabs-title",""),l.setAttribute("data-fls-tabs-item",""),o&&m==r[1]&&n[m].classList.add("--tab-active"),l.hidden=!n[m].classList.contains("--tab-active")})}function u(e){let n=e.querySelectorAll("[data-fls-tabs-title]"),t=e.querySelectorAll("[data-fls-tabs-item]");const s=e.dataset.flsTabsIndex;function o(m){if(m.hasAttribute("data-fls-tabs-animate"))return m.dataset.flsTabsAnimate>0?Number(m.dataset.flsTabsAnimate):500}const l=o(e);if(t.length>0){const m=e.hasAttribute("data-fls-tabs-hash");t=Array.from(t).filter(c=>c.closest("[data-fls-tabs]")===e),n=Array.from(n).filter(c=>c.closest("[data-fls-tabs]")===e),t.forEach((c,b)=>{n[b].classList.contains("--tab-active")?(l?F(c,l):c.hidden=!1,m&&!c.closest(".popup")&&N(`tab-${s}-${b}`)):l?M(c,l):c.hidden=!0})}}function g(e){const n=e.target;if(n.closest("[data-fls-tabs-title]")){const t=n.closest("[data-fls-tabs-title]"),s=t.closest("[data-fls-tabs]");if(!t.classList.contains("--tab-active")&&!s.querySelector(".--slide")){let o=s.querySelectorAll("[data-fls-tabs-title].--tab-active");o.length&&(o=Array.from(o).filter(l=>l.closest("[data-fls-tabs]")===s)),o.length&&o[0].classList.remove("--tab-active"),t.classList.add("--tab-active"),u(s)}e.preventDefault()}}}window.addEventListener("load",H),(function(){const a=document.querySelectorAll("[data-quotes]");a.length&&a.forEach(r=>{const h=Array.from(r.querySelectorAll("[data-quote-item]")),d=r.parentElement,u=d?d.querySelector("[data-quote-next]"):null;if(!h.length)return;if(h.length===1){h[0].classList.add("is-active"),u&&(u.style.display="none");return}let g=0;function e(n){h.forEach((t,s)=>{t.classList.toggle("is-active",s===n)})}e(g),u&&u.addEventListener("click",()=>{g=(g+1)%h.length,e(g)})})})();const L="fls-user-theme";function j(){return new Date().getHours()}function I(){const a=document.documentElement,r=document.querySelector("[data-fls-darklite]");if(!r)return;const h=Array.from(r.querySelectorAll(".theme-aside__item"));function d(){const n=localStorage.getItem(L);if(n)return n;const t=document.querySelector("[data-fls-darklite-time]");if(t){let s=t.dataset.flsDarkliteTime||"18,5";const[o,l]=s.split(","),m=+o,c=+l,b=j();return(m<=c?b>=m&&b<=c:b>=m||b<=c)?"dark":"light"}return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function u(n,{save:t=!1}={}){a.setAttribute("data-theme",n),h.forEach(s=>{const o=s.dataset.theme;s.classList.toggle("theme-aside__item--active",o===n)}),t&&localStorage.setItem(L,n)}const g=d();u(g),window.matchMedia&&!localStorage.getItem(L)&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{const s=t.matches?"dark":"light";u(s)}),r.addEventListener("click",n=>{const t=n.target.closest(".theme-aside__item");if(!t)return;const s=t.dataset.theme;s&&u(s,{save:!0})});const e=document.querySelector("[data-fls-darklite-reset]");e&&e.addEventListener("click",()=>{localStorage.removeItem(L);const n=d();u(n,{save:!1})}),A&&A.log&&A.log(`Darklite: \u0430\u043A\u0442\u0438\u0432\u043D\u0430 \u0442\u0435\u043C\u0430 "${g}"`)}window.addEventListener("load",I),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-fls-moodtoday]").forEach($)});function $(a){const r=a.querySelector(".moodtoday__scrollbars-track"),h=a.querySelector(".moodtoday__scrollbars-range"),d=a.querySelector(".moodtoday__scrollbars-thumb"),u=a.querySelector(".moodtoday__thumb-block"),g=a.querySelector(".moodtoday__smille"),e=a.querySelector(".moodtoday__text-center"),n=a.querySelector(".moodtoday__track-emotion");if(!r||!h||!d||!u||!g||!e||!n)return;let t=10,s=!1;const o=[{min:0,max:20,label:"Very Low",emoji:"\u{1F614}",color:"#6B52C9"},{min:20,max:40,label:"Low",emoji:"\u{1F641}",color:"#6B52C9"},{min:40,max:60,label:"Neutral",emoji:"\u{1F610}",color:"#F2B01E"},{min:60,max:80,label:"Good",emoji:"\u{1F642}",color:"#4CAF50"},{min:80,max:101,label:"Great",emoji:"\u{1F604}",color:"#4CAF50"}];function l(i){return Math.max(0,Math.min(1,i))}function m(i){const y=r.getBoundingClientRect();t=l((i-y.left)/y.width)*100,b()}function c(i){return o.find(y=>i>=y.min&&i<y.max)||o[o.length-1]}function b(){const i=t,y=c(i);h.style.width=i+"%",u.style.left=i+"%",d.setAttribute("aria-valuenow",String(Math.round(i))),e.textContent=y.label,e.style.color=y.color,g.textContent=y.emoji,g.style.filter=`drop-shadow(0 0 20px ${y.color}40)`,n.style.width=i+"%"}r.addEventListener("mousedown",function(i){i.preventDefault(),s=!0,m(i.clientX)}),d.addEventListener("mousedown",function(i){i.preventDefault(),s=!0}),document.addEventListener("mousemove",function(i){s&&m(i.clientX)}),document.addEventListener("mouseup",function(){s=!1}),r.addEventListener("touchstart",function(i){const y=i.touches[0];y&&(s=!0,m(y.clientX))},{passive:!0}),d.addEventListener("touchstart",function(i){s=!0},{passive:!0}),document.addEventListener("touchmove",function(i){if(!s)return;const y=i.touches[0];y&&m(y.clientX)},{passive:!0}),document.addEventListener("touchend",function(){s=!1}),d.addEventListener("keydown",function(i){(i.key==="ArrowLeft"||i.key==="ArrowDown")&&(t=Math.max(0,t-5),b()),(i.key==="ArrowRight"||i.key==="ArrowUp")&&(t=Math.min(100,t+5),b())}),b()}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-fls-feeltoday]").forEach(O)});function O(a){const r=a.querySelectorAll(".feeltoday__item-button"),h=a.querySelector(".feeltoday__feeling"),d=a.querySelector(".feeltoday__feeling-item");if(!r.length||!h||!d)return;d.textContent="",h.classList.remove("feeltoday__feeling--visible"),r.forEach(g=>{g.addEventListener("click",function(){g.classList.toggle("feeltoday__item-button--active"),u()})});function u(){const g=a.querySelectorAll(".feeltoday__item-button--active .feeltoday__smille-text"),e=Array.from(g).map(n=>n.textContent.trim()).filter(Boolean);e.length>0?(d.textContent=e.join(", "),h.classList.add("feeltoday__feeling--visible")):(d.textContent="",h.classList.remove("feeltoday__feeling--visible"))}}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-fls-breathingpractice]").forEach(R)});function R(a){const r=a.querySelector(".breathingpractice__circle"),h=a.querySelector(".breathingpractice__circle-number"),d=a.querySelector(".breathingpractice__circle-text"),u=a.querySelector(".breathingpractice__button"),g=a.querySelector(".breathingpractice__button-reset");if(!r||!h||!d||!u||!g)return;let e=a.querySelector(".breathingpractice__button-label");if(!e){const f=u.querySelector("svg"),_=(u.textContent||"Start").trim();u.textContent="",f&&u.appendChild(f),e=document.createElement("span"),e.className="breathingpractice__button-label",e.textContent=_||"Start",u.appendChild(e)}const n=a.querySelectorAll(".breathingpractice_colomn-structure");if(n.length<2)return;const t=Array.from(n[0].querySelectorAll(".breathingpractice__settings-button")),s=Array.from(n[1].querySelectorAll(".breathingpractice__settings-button"));let o=!1,l="inhale",m=3,c=4,b=c,i=null;function y(f){return f==="inhale"?"#8B71EE":f==="hold"?"#F4A4BF":"#6B52C9"}function v(){const f=y(l);h.textContent=String(b),d.textContent=l,r.style.borderColor=f,r.style.boxShadow=`0 0 30px ${f}40`,r.style.background=`radial-gradient(circle, ${f}20, ${f}10)`,h.style.color=f;const _=o&&(l==="inhale"||l==="hold");r.style.width=_?"180px":"140px",r.style.height=_?"180px":"140px",o?(e.textContent="Pause",u.classList.add("breathingpractice__button--paused")):(e.textContent="Start",u.classList.remove("breathingpractice__button--paused")),t.forEach(p=>{const S=p.textContent.trim(),E=parseInt(S,10)===m;p.classList.toggle("breathingpractice__settings-button--active",E)}),s.forEach(p=>{const S=p.textContent.trim(),E=parseInt(S,10)===c;p.classList.toggle("breathingpractice__settings-button--active",E)})}function C(){i||(i=window.setInterval(function(){b<=1?(l==="inhale"?l="hold":l==="hold"?l="exhale":l="inhale",b=c):b-=1,v()},1e3))}function q(){i&&(clearInterval(i),i=null)}function T(){q(),o=!1,l="inhale",b=c,v()}u.addEventListener("click",function(){o=!o,o?C():q(),v()}),g.addEventListener("click",T),t.forEach(f=>{f.addEventListener("click",function(){const _=f.textContent.trim(),p=parseInt(_,10);isNaN(p)||(m=p,v())})}),s.forEach(f=>{f.addEventListener("click",function(){const _=f.textContent.trim(),p=parseInt(_,10);isNaN(p)||(c=p,o||(b=c),v())})});const x=t.find(f=>f.classList.contains("breathingpractice__settings-button--active"));if(x){const f=parseInt(x.textContent.trim(),10);isNaN(f)||(m=f)}const w=s.find(f=>f.classList.contains("breathingpractice__settings-button--active"));if(w){const f=parseInt(w.textContent.trim(),10);isNaN(f)||(c=f,b=f)}v()}(()=>{const a=document.querySelector(".aside__body"),r=document.querySelector(".aside__burger");if(!a||!r)return;function h(){const d=a.classList.toggle("aside__body--active");r.classList.toggle("aside__burger--close",d),typeof bodyLockToggle=="function"&&bodyLockToggle()}r.addEventListener("click",d=>{d.preventDefault(),h()}),document.addEventListener("click",d=>{if(!a.classList.contains("aside__body--active"))return;const u=d.target.closest(".aside__body"),g=d.target.closest(".aside__burger");!u&&!g&&h()})})();
